---
title: "Create_graphs_for_NVI"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Create_graphs_for_NVI}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

You can create graphs and plots in accord with NVI's graphical profile when using ggplot2 with the theme_NVI and the palette_NVI. Here we use the built in data set iris

```{r setup}
```

Make a scatter plot with distribution of spetal_length per iris species. First we use the default theme in ggplot2, which is theme_grey.
```{r} 
library(ggplot2)
# Scatter plot
ggplot(iris, aes(Sepal.Length, Sepal.Width)) +
  geom_point(aes(color = Species)) +
  theme(legend.position = "right") 
```

Then we would like to make the scatter plot in accord with the graphical profile. We use the theme_NVI and palette_graph that is in the package NVIpretty. First attach the package.

```{r echo = FALSE}
library(NVIpretty)
```

You can add theme_NVI in the ggplot function as another statement. theme_NVI removes the background, set the colour for the axis marks and the horizontal support lines. Using palette_graph sets the colours to the colours in the graphical profile.
```{r} 
# Scatter plot
ggplot(iris, aes(Sepal.Length, Sepal.Width)) +
  geom_point(aes(color = Species)) +
  theme(legend.position = "right")  +
  theme_NVI() +
  scale_colour_manual(values = palette_graph)
```

Instead of setting the theme in all the code, you may change the default theme for the session to theme_NVI.  
```{r}
theme_set(theme_NVI())
```

Box plot
```{r} 
ggplot(iris, aes(Species, Sepal.Length)) +
  geom_boxplot(aes(fill = Species)) +
  theme(legend.position = "right") + 
  scale_fill_manual(values = palette_graph)
```


Example with mtcars and ggplot2 
https://rpubs.com/chrisbrunsdon/spacetime_1a

Make a bar graph with number of observations per species in iris. 
```{r} 
ggplot(mtcars, aes(x = cyl, fill = am)) +
  geom_bar(position="dodge") +
scale_fill_manual(values=palette_NVI)
```

Make a scatter plot with distribution of spetal_length per iris species. 
```{r} 
# Scatter plot
ggplot(iris, aes(Sepal.Length, Sepal.Width)) +
  geom_point(aes(color = Species)) +
  theme(legend.position = "right") + 
  scale_colour_manual(values = palette_graph)


ggplot(mtcars, aes(x=hp, y=mpg, color=cyl, shape=cyl)) +
    geom_point(size=3)

ggplot(mtcars, aes(x = wt, y = mpg, col = cyl)) +
  geom_point()  # Fill in using instructions Plot 1
```
Make a pie chart with percent of observations per species in iris. 
```{r} 
# Basic piechart
ggplot(data, aes(x="", y=value, fill=group)) +
  geom_bar(stat="identity", width=1, color="white") +
  coord_polar("y", start=0) 
  

library(ggplot2)
mtcars$cyl <- factor(mtcars$cyl) # converts to a categorical variable
mtcars$gear <- factor(mtcars$gear) # converts to a categorical variable

p <- ggplot(data=mtcars, aes(x=factor(1), stat="bin", fill=cyl)) + geom_bar(position="fill") # Stacked bar chart
p <- p + ggtitle("Cylinders by Gears") + xlab("") + ylab("Gears") # Adds titles
p <- p + facet_grid(facets=. ~ gear) # Side by side bar chart
p <- p + coord_polar(theta="y") # side by side pie chart
p
```

```{r setup}
library(NVIpretty)
# set_theme(theme_NVI())
```



Box plot
```{r} 
ggplot(iris, aes(Species, Sepal.Length)) +
  geom_boxplot(aes(fill = Species)) +
  theme(legend.position = "right") + 
  scale_fill_manual(values = palette_graph)


ggplot(data = mtcars) +
  geom_boxplot(mapping = aes(x = cyl, y = mpg, fill=cyl)) +
  scale_fill_brewer(palette="Set1")
```
